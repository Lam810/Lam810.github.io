(window.webpackJsonp=window.webpackJsonp||[]).push([[200],{"/wj7":function(e,t,r){"use strict";var n=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.PENDING=t.ModalView=void 0;var a=n(r("lSNA")),o=n(r("pVnL")),s=n(r("m7qm")),i=n(r("MJtd")),u=r("X5UI"),c=r("MB9O"),l=r("cMqt"),f=r("Agof"),d=r("vVLA"),m=n(r("5p6h")),p=n(r("gOpR")),h=n(r("xs9F")),v=n(r("cXUB")),g=r("QP4D");function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var b=l.logging.getLogger({name:"corvair.sites.customer-pages.pages.homeDetails.components.reverseMatchmakerSection.stores.SuggestedCustomersStore",color:{server:83,client:"rgb(42,212,42)"}}),C={SELECT:"SELECT",SEARCH:"SEARCH",CONTACT:"CONTACT"};t.ModalView=C;t.PENDING="PENDING";var _=s.default.createStoreFactory({init:function(e){var t=e.propertyId,r=e.listingId,n=e.accessLevel,a=e.suggestionsVisible,o=void 0===a||a;t?(this.customersFetched=!1,this.setState({propertyId:t,listingId:r,accessLevel:n,isFetchingCustomers:!1,customersFetchError:null,suggestedCustomers:[],selectedCustomer:null,topOfModalNavigationStack:null,modalNavigationStackLength:0,isSendingMessage:!1,sendMessageError:null,displayMessageSuccess:!1,drafts:{},searchTextValue:"",isFetchingSearchResults:!1,searchFetchError:null,searchResults:[],customerActivity:{},suggestionsVisible:o}),this._modalNavigationStack=[],this.listenTo(i.default.openModal,this.onOpenModal),this.listenTo(i.default.closeModal,this.onCloseModal),this.listenTo(i.default.selectCustomerToContact,this.onSelectCustomerToContact),this.listenTo(i.default.sendMessageToCustomer,this.onSendMessageToCustomer),this.listenTo(i.default.searchBarTextChange,this.onSearchBarKeyPress),this.listenTo(i.default.searchForCustomer,this.onSearchForCustomer),this.listenTo(i.default.back,this.onBack),this.listenTo(i.default.messageDraftChange,this.onMessageDraftChange),this.listenTo(i.default.toggleSuggestionsVisibility,this.onToggleSuggestionsVisibility),this.state.suggestionsVisible&&this._fetchCustomers()):b.error("Error in init(): propertyId was not passed!")},_sortByMatchRank:function(e,t){return e.matchRank-t.matchRank},_sortByFirstName:function(e,t){return e.combinedMemberNames<t.combinedMemberNames?-1:e.combinedMemberNames>t.combinedMemberNames?1:0},_computeCombinedMemberNames:function(e){e.combinedMemberNames=(0,c.combineMemberNames)(e.members,e.primaryMemberLoginId)},_fetchCustomers:function(){var e=this;return this.state.accessLevel!==p.default.id?(this.setState({isAgent:!1}),(0,v.default)()):(this.setState({isFetchingCustomers:!0,customersFetchError:null}),(0,u.getAllActiveCustomersForListing)(this.state.listingId).then(function(t){if(t.isAgent){var r=t.suggestions;e._fetchCustomerActivity(r),r.forEach(e._computeCombinedMemberNames),r.sort(e._sortByFirstName),r.sort(e._sortByMatchRank),e.setState({suggestedCustomers:r,isFetchingCustomers:!1,isAgent:!0}),e.customersFetched=!0}else e.setState({isAgent:!1,isFetchingCustomers:!1})}).catch(function(t){e.setState({customersFetchError:t,isFetchingCustomers:!1}),b.error("Error in _fetchCustomers()",t)}))},_filterCustomersWithExistingCustomerActivity:function(e){var t=this;return e.filter(function(e){return!t.state.customerActivity[e]})},_fetchCustomerActivity:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=this._filterCustomersWithExistingCustomerActivity(t.map(function(e){return e.primaryMemberLoginId}));if(r.length)return this._setCustomerActivityToPendingOrNull(r),(0,u.getCustomerActivityForProperty)(this.state.propertyId,r).then(function(t){e.setState({customerActivity:(0,o.default)({},e.state.customerActivity,t)})}).catch(function(t){b.error("Error in _fetchCustomerActivity()",t),e._setCustomerActivityToPendingOrNull(r,!1)})},_setCustomerActivityToPendingOrNull:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=(0,o.default)({},this.state.customerActivity);e.forEach(function(e){e&&(r[e]=t?"PENDING":null)}),this.setState({customerActivity:r})},_getTopOfNavigationStack:function(){return this._modalNavigationStack[this._modalNavigationStack.length-1]||null},_validateNavigation:function(e){var t=this._getTopOfNavigationStack();return e&&e!==t||(b.error("Error in _validateNavigation(): attempted to navigate from ".concat(t," to ").concat(e)),!1)},_pushNavigationStack:function(e){this._validateNavigation(e)&&(this._modalNavigationStack.push(e),this.setState({topOfModalNavigationStack:e,modalNavigationStackLength:this._modalNavigationStack.length}))},_popNavigationStack:function(){this._modalNavigationStack.pop(),this.setState({topOfModalNavigationStack:this._getTopOfNavigationStack(),modalNavigationStackLength:this._modalNavigationStack.length})},_resetNavigationStack:function(){this._modalNavigationStack=[],this.setState({topOfModalNavigationStack:null,modalNavigationStackLength:0})},_deleteDraft:function(e){var t=(0,o.default)({},this.state.drafts);delete t[e],this.setState({drafts:t})},_updateDraft:function(e,t){var r=(0,o.default)({},this.state.drafts,(0,a.default)({},e,t));this.setState({drafts:r})},_handleSendMessageSuccess:function(){var e=this.state.selectedCustomer.primaryMemberLoginId;this.setState({displayMessageSuccess:!0,isSendingMessage:!1}),this._deleteDraft(e)},_handleSendMessageError:function(e){this.setState({sendMessageError:e,isSendingMessage:!1}),m.default.showErrorNotice({title:"Oops, something went wrong. Please try again later"})},_handleSendMessageCleanup:function(){this.setState({isSendingMessage:!1})},_sendSelectCustomerRiftEvent:function(e,t){var r,n=(0,c.getPrimaryMember)(e.members,e.primaryMemberLoginId),o=this.state.suggestedCustomers.filter(function(t){return t.primaryMemberLoginId===e.primaryMemberLoginId}).length>0,s=e.inGroupWithAgent?"comment":"email";switch(this.state.topOfModalNavigationStack){case C.SELECT:r="inline";break;case C.SEARCH:r="search";break;default:r="inline"}var i=e.riftMetadata||{};h.default.trackClick(t,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach(function(t){(0,a.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({customer:n.personId,isSuggested:o,contactMethod:s,location:r},i))},onOpenModal:function(){this._resetNavigationStack(),this._pushNavigationStack(C.SELECT)},onCloseModal:function(){h.default.trackClick(h.default.clicks.CLOSE_CUSTOMER_MATCHES_BUTTON,{location:this.state.topOfModalNavigationStack}),this._resetNavigationStack(),this.setState({selectedCustomer:null,displayMessageSuccess:!1})},onSelectCustomerToContact:function(e){var t=e.inGroupWithAgent?h.default.clicks.COMMENT_BUTTON:h.default.clicks.EMAIL_BUTTON;this._sendSelectCustomerRiftEvent(e,t),this._pushNavigationStack(C.CONTACT),this.setState({selectedCustomer:e})},onBack:function(){this._popNavigationStack(),this.setState({displayMessageSuccess:!1})},onMessageDraftChange:function(e){this.state.selectedCustomer&&this._updateDraft(this.state.selectedCustomer.primaryMemberLoginId,e)},onSendMessageToCustomer:function(){var e=this.state,t=e.selectedCustomer,r=e.drafts;this._sendSelectCustomerRiftEvent(t,h.default.clicks.CUSTOMER_MATCHES_SEND_BUTTON);var n=r[t.primaryMemberLoginId];n&&(this.setState({isSendingMessage:!0,sendMessageError:null}),t.inGroupWithAgent?this._sendComment(n.trim()):this._sendEmail(n.trim()))},onToggleSuggestionsVisibility:function(){var e=!this.state.suggestionsVisible;return this.setState({suggestionsVisible:e}),(0,g.isBrowser)()&&(0,c.setSuggestedCustomersVisibilitySetting)(e),!this.state.suggestionsVisible||this.customersFetched||this.state.isFetchingCustomers?(0,v.default)():this._fetchCustomers()},_sendEmail:function(e){var t=this,r=this.state.selectedCustomer.primaryMemberLoginId;(0,u.sendSuggestionEmailToCustomer)(this.state.listingId,r,e).then(function(){var e=t._setCustomerAsPreviouslyEmailed(t.state.suggestedCustomers,r);return t.setState({suggestedCustomers:e}),t._handleSendMessageSuccess()}).catch(this._handleSendMessageError)},_sendComment:function(e){var t=this,r=this.state,n=r.selectedCustomer,a=r.propertyId;(0,f.postComment)({propertyId:a,loginGroupId:n.groupId,comment:e}).then(function(){return(0,d.fetchCommentThreads)(),t._handleSendMessageSuccess()}).catch(this._handleSendMessageError)},_setCustomerAsPreviouslyEmailed:function(e,t){var r=e.slice();return r.forEach(function(e){e.primaryMemberLoginId===t&&(e.previouslyEmailedByAgent=!0)}),r},onSearchBarKeyPress:function(e){this.setState({searchTextValue:e})},onSearchForCustomer:function(e){var t=this;return h.default.trackClick(h.default.clicks.SEARCH_BUTTON,{searchString:e}),this.setState({isFetchingSearchResults:!0,searchFetchError:null}),this.state.topOfModalNavigationStack!==C.SEARCH&&this._pushNavigationStack(C.SEARCH),(0,u.getSearchResultsForListing)(this.state.listingId,e).then(function(e){if(e.isAgent){var r=e.suggestions;t._fetchCustomerActivity(r),r.forEach(t._computeCombinedMemberNames),t.setState({searchResults:r,isFetchingSearchResults:!1,isAgent:!0})}else t.setState({isAgent:!0,isFetchingSearchResults:!1})}).catch(function(e){t.setState({searchFetchError:e,isFetchingSearchResults:!1}),b.error("Error in onPerformSearch()",e)})}});t.default=_},"00g4":function(e,t,r){"use strict";var n=r("TqRt"),a=r("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r("lwsE")),s=n(r("W8MJ")),i=n(r("7W2i")),u=n(r("a1gu")),c=n(r("Nsbk")),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var i=o?Object.getOwnPropertyDescriptor(e,s):null;i&&(i.get||i.set)?Object.defineProperty(n,s,i):n[s]=e[s]}n.default=e,r&&r.set(e,n);return n}(r("mXGw"));n(r("17x9"));function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,c.default)(e);if(t){var a=(0,c.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,u.default)(this,r)}}r("b1Fl");var m=function(e){(0,i.default)(r,e);var t=d(r);function r(e){var n;return(0,o.default)(this,r),(n=t.call(this,e)).state={timeout:null},n}return(0,s.default)(r,[{key:"componentDidMount",value:function(){var e=this;this.setState({timeout:setTimeout(function(){return e._scrollToBottom()},100)})}},{key:"componentWillUnmount",value:function(){this.state.timeout&&clearTimeout(this.state.timeout)}},{key:"_scrollToBottom",value:function(){var e=this.refs.commentsContainer;e.scrollTop=e.scrollHeight}},{key:"componentDidUpdate",value:function(e){this.props.elementCount>e.elementCount&&this._scrollToBottom()}},{key:"render",value:function(){return l.default.createElement("div",{className:"MatchmakerScrollableContainer",ref:"commentsContainer"},this.props.children)}}]),r}(l.Component);t.default=m,m.propTypes={},e.exports=t.default},"0Buv":function(e,t,r){},"0Zdv":function(e,t,r){},"1L7V":function(e,t,r){"use strict";var n=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r("pVnL")),o=n(r("lwsE")),s=n(r("W8MJ")),i=n(r("7W2i")),u=n(r("a1gu")),c=n(r("Nsbk")),l=r("mXGw"),f=(n(r("17x9")),n(r("zFKn"))),d=n(r("McMD")),m=r("MJtd"),p=n(r("jhpn")),h=n(r("yWe4")),v=r("MB9O"),g=n(r("xs9F"));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,c.default)(e);if(t){var a=(0,c.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,u.default)(this,r)}}r("1QT7");var b=function(e){(0,i.default)(r,e);var t=y(r);function r(e){return(0,o.default)(this,r),t.call(this,e)}return(0,s.default)(r,[{key:"componentDidMount",value:function(){g.default.trackImpression(g.default.impressions.CUSTOMER_MATCHES)}},{key:"render",value:function(){var e=this.props.suggestionsVisible?"Hide Section":"Show Section",t=React.createElement("div",{className:"headerContainer"},React.createElement("h2",{className:"header heading-medium padding-medium"},"Recommend this home"),React.createElement("div",{className:"sectionVisibilityToggle"},React.createElement("a",{className:"clickable",tabIndex:"0",onClick:this._toggleSuggestionsVisibility.bind(this)},e)));return React.createElement("div",{className:"MatchmakerSuggestedCustomers"},t,this.props.suggestionsVisible&&this._renderSuggestedCustomersBody())}},{key:"_renderSuggestedCustomersBody",value:function(){var e=React.createElement("a",{className:"modalOpener clickable",onClick:function(){g.default.trackClick(g.default.clicks.SEND_TO_CUSTOMER_BUTTON),(0,m.openModal)()}},React.createElement("span",null,"See all customers"),React.createElement(p.default,null)),t=React.createElement(h.default,this.props);return React.createElement(l.Fragment,null,this.props.isFetchingCustomers?this._renderSuggestionsLoadingIndicator():this._renderSuggestionList(),e,t)}},{key:"_renderSuggestionsLoadingIndicator",value:function(){return React.createElement(d.default,{text:"Loading",size:"large",layout:"row",centerPosition:"horiz",className:"suggestedCustomersLoadingIndicator"})}},{key:"_renderSuggestionList",value:function(){var e=this._getFilteredSuggestedCustomers().slice(0,this.props.visibleThreadLimit),t=null;((0,v.getWeakMatchCustomers)(e)||[]).length>=e.length&&(t=React.createElement("div",{className:"suggestionsNote font-size-small font-color-gray-light"},React.createElement("b",null,"Note:")," None of your customers are a great match for this home."));var r=e.map(this._renderSuggestion.bind(this));return React.createElement(l.Fragment,null,t,r)}},{key:"_renderSuggestion",value:function(e){var t=this.props.customerActivity;return React.createElement(f.default,(0,a.default)({key:e.primaryMemberLoginId},e,{activity:t[e.primaryMemberLoginId],contactCallback:function(){return(0,m.selectCustomerToContact)(e)}}))}},{key:"_getFilteredSuggestedCustomers",value:function(){var e=this.props,t=e.commentThreadsStore,r=e.suggestedCustomers;return(0,v.getCustomersWithNoCommentThread)(r,t.conversations)}},{key:"_toggleSuggestionsVisibility",value:function(){var e=this.props.suggestionsVisible?g.default.clicks.HIDE_SECTION:g.default.clicks.SHOW_SECTION;g.default.trackClick(e),(0,m.toggleSuggestionsVisibility)()}}]),r}(l.Component);t.default=b,b.defaultProps={visibleThreadLimit:3},b.propTypes={},e.exports=t.default},"1QT7":function(e,t,r){},"2TKG":function(e,t,r){"use strict";var n=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r("lwsE")),o=n(r("W8MJ")),s=n(r("7W2i")),i=n(r("a1gu")),u=n(r("Nsbk")),c=r("mXGw"),l=(n(r("17x9")),n(r("VRHb"))),f=r("MB9O");function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,u.default)(e);if(t){var a=(0,u.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}r("cW/f");var m=function(e){(0,s.default)(r,e);var t=d(r);function r(){return(0,a.default)(this,r),t.apply(this,arguments)}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props,t=e.firstName,r=e.lastName,n=e.created,a=(0,f.getFriendlyTimestamp)(n.seconds);return React.createElement("div",{className:"MatchmakerComment"},React.createElement("div",{className:"imageContainer"},React.createElement(l.default,{size:"small",url:this.props.userPhotoUrl})),React.createElement("div",{className:"textContainer"},React.createElement("p",{className:"commenterText"},"".concat(t," ").concat(r," ・ ").concat(a)),React.createElement("div",{className:"comment"},this._renderCommentText())))}},{key:"_renderCommentText",value:function(){return this.props.comment.split("\n").map(function(e,t){return React.createElement("p",{"data-rf-test-name":"matchmakerCommentText",key:t+e},e)})}}]),r}(c.Component);t.default=m,m.propTypes={},e.exports=t.default},"67wX":function(e,t,r){"use strict";var n=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r("MB9O"),o=n(r("m7qm")),s=n(r("aJIK")),i=n(r("/wj7")),u=o.default.createStoreFactory({init:function(e){var t=new s.default({listingId:e.listingId,propertyId:e.propertyId,accessLevel:e.accessLevel,addressSectionInfo:e.addressSectionInfo}),r=new i.default({listingId:e.listingId,propertyId:e.propertyId,accessLevel:e.accessLevel,addressSectionInfo:e.addressSectionInfo,suggestionsVisible:(0,a.getSuggestedCustomersVisibilitySetting)()});this.setState({commentThreadsStore:t,suggestedCustomersStore:r})}});t.default=u,e.exports=t.default},"BCv+":function(e,t,r){"use strict";var n=r("TqRt"),a=r("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r("lwsE")),s=n(r("W8MJ")),i=n(r("7W2i")),u=n(r("a1gu")),c=n(r("Nsbk")),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var i=o?Object.getOwnPropertyDescriptor(e,s):null;i&&(i.get||i.set)?Object.defineProperty(n,s,i):n[s]=e[s]}n.default=e,r&&r.set(e,n);return n}(r("mXGw")),f=(n(r("17x9")),r("MB9O")),d=n(r("VRHb")),m=n(r("xs9F"));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,c.default)(e);if(t){var a=(0,c.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,u.default)(this,r)}}r("E5DU");var v=function(e){(0,i.default)(r,e);var t=h(r);function r(){return(0,o.default)(this,r),t.apply(this,arguments)}return(0,s.default)(r,[{key:"_onViewInAgentTools",value:function(){m.default.trackClick(m.default.clicks.PROFILE)}},{key:"render",value:function(){var e=this.props,t=e.members,r=e.primaryMemberLoginId,n=(0,f.getPrimaryMember)(t,r),a=(0,f.combineMemberNames)(t,r),o="/tools/new/customers/".concat(n.personId);return l.default.createElement("div",{className:"MatchmakerCustomerCard"},l.default.createElement(d.default,{size:"medium",url:n.photo.url}),l.default.createElement("div",{className:"textContainer"},l.default.createElement("p",{className:"nameText font-size-small"},a),l.default.createElement("a",{className:"font-size-small",onClick:this._onViewInAgentTools.bind(this),href:o,target:"_blank"},"View in Agent Tools")))}}]),r}(l.Component);t.default=v,v.propTypes={},e.exports=t.default},BMQQ:function(e,t,r){},CAmu:function(e,t,r){},E5DU:function(e,t,r){},FfwZ:function(e,t,r){"use strict";var n=r("TqRt"),a=r("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r("lwsE")),s=n(r("W8MJ")),i=n(r("7W2i")),u=n(r("a1gu")),c=n(r("Nsbk")),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var i=o?Object.getOwnPropertyDescriptor(e,s):null;i&&(i.get||i.set)?Object.defineProperty(n,s,i):n[s]=e[s]}n.default=e,r&&r.set(e,n);return n}(r("mXGw")),f=(n(r("17x9")),n(r("VRHb"))),d=n(r("syNK")),m=n(r("jhpn")),p=n(r("luvc")),h=n(r("vVLA")),v=r("MB9O");function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(g=function(e){return e?r:t})(e)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,c.default)(e);if(t){var a=(0,c.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,u.default)(this,r)}}r("m7gb");var b=function(e){(0,i.default)(r,e);var t=y(r);function r(e){var n;return(0,o.default)(this,r),(n=t.call(this,e)).state={smallScreen:(0,p.default)("screen-size")<=p.default.screenSizes.SMALL},n}return(0,s.default)(r,[{key:"_toggleThreadVisibility",value:function(){this.state.smallScreen?h.default.openThreadView(this.props.groupId):h.default.toggleExpandCommentThread(this.props.groupId)}},{key:"render",value:function(){var e=this.props,t=e.members,r=e.comments,n=e.expanded,a=e.groupId,o=e.currentUser,s=e.currentUserPhotoUrl,i=e.isPosting,u=e.primaryMemberLoginId,c=this.state.smallScreen,p=(0,v.getPrimaryMember)(t,u).photo.url,h=n&&!c,g=(0,v.combineMemberNames)(t,u),y=(0,v.getThreadMetadata)(r,h),b="toggleContainer";c||(b+=n?" toggleExpanded":" toggleCollapsed");var C=h?"header clickable":"header clickable bottomBorder";return l.default.createElement("div",{className:"MatchmakerCommentThread"},l.default.createElement("div",{"data-rf-test-name":"matchmakerCommentThreadClickable",className:C,onClick:this._toggleThreadVisibility.bind(this)},l.default.createElement("div",null,l.default.createElement(f.default,{url:p})),l.default.createElement("div",{className:"textContainer"},l.default.createElement("p",{className:"threadName"},g),l.default.createElement("span",{className:"threadMetadata"},y)),l.default.createElement("div",{className:b},l.default.createElement(m.default,null))),h?l.default.createElement(d.default,{comments:r,members:t,groupId:a,currentUser:o,currentUserPhotoUrl:s,isPosting:i}):null)}}]),r}(l.Component);t.default=b,b.propTypes={},e.exports=t.default},GcKw:function(e,t,r){"use strict";var n=r("TqRt"),a=r("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r("lwsE")),s=n(r("W8MJ")),i=n(r("7W2i")),u=n(r("a1gu")),c=n(r("Nsbk")),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var i=o?Object.getOwnPropertyDescriptor(e,s):null;i&&(i.get||i.set)?Object.defineProperty(n,s,i):n[s]=e[s]}n.default=e,r&&r.set(e,n);return n}(r("mXGw")),f=(n(r("17x9")),n(r("FfwZ"))),d=n(r("wcuB")),m=n(r("xs9F"));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,c.default)(e);if(t){var a=(0,c.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,u.default)(this,r)}}r("ebB6");var v=function(e){(0,i.default)(r,e);var t=h(r);function r(e){var n;return(0,o.default)(this,r),(n=t.call(this,e)).state={maxVisibleThreads:n.props.visibleThreadLimit},n}return(0,s.default)(r,[{key:"_increaseMaxVisibleThreads",value:function(){m.default.trackClick(m.default.clicks.SEE_MORE_COMMENT_THREADS_BUTTON),this.setState({maxVisibleThreads:this.state.maxVisibleThreads+this.props.visibleThreadLimit})}},{key:"renderCommentThread",value:function(e){var t=e.propertyConversation,r=e.members,n=e.groupId,a=e.primaryMemberLoginId,o=!!this.props.expandedThreads[n],s=t.conversation;return l.default.createElement(f.default,{key:n,groupId:n,comments:s,members:r,expanded:o,currentUser:this.props.currentUser,currentUserPhotoUrl:this.props.currentUserPhotoUrl,isPosting:this.props.isPosting,primaryMemberLoginId:a})}},{key:"mapLimitedCommentThreads",value:function(){for(var e=[],t=0;t<this.state.maxVisibleThreads;t++)if(this.props.conversations[t]){var r=this.renderCommentThread(this.props.conversations[t]);e.push(r)}return e}},{key:"renderSeeMore",value:function(){var e=this.props,t=e.visibleThreadLimit,r=e.conversations;if(this.state.maxVisibleThreads>=r.length)return null;var n=r.length-this.state.maxVisibleThreads,a=n<t?n:t;return l.default.createElement("p",{"data-rf-test-name":"matchmakerSeeMoreCommentThreads",className:"seeMore clickable font-color-link",onClick:this._increaseMaxVisibleThreads.bind(this)},"See ".concat(a," more"))}},{key:"render",value:function(){return l.default.createElement("div",{className:"MatchmakerCommentThreads","rf-test-id":"MatchmakerCommentThreads"},l.default.createElement("h2",null,"Comments on this home"),this.mapLimitedCommentThreads(),this.renderSeeMore(),this.props.currentOpenThread?l.default.createElement(d.default,this.props):null)}}]),r}(l.Component);t.default=v,v.defaultProps={visibleThreadLimit:3},v.propTypes={},e.exports=t.default},GmUY:function(e,t,r){"use strict";var n=r("TqRt"),a=r("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r("pVnL")),s=n(r("lwsE")),i=n(r("W8MJ")),u=n(r("7W2i")),c=n(r("a1gu")),l=n(r("Nsbk")),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var i=o?Object.getOwnPropertyDescriptor(e,s):null;i&&(i.get||i.set)?Object.defineProperty(n,s,i):n[s]=e[s]}n.default=e,r&&r.set(e,n);return n}(r("mXGw")),d=n(r("GcKw")),m=n(r("1L7V"));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,l.default)(e);if(t){var a=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}r("BMQQ");var v=function(e){(0,u.default)(r,e);var t=h(r);function r(){return(0,s.default)(this,r),t.apply(this,arguments)}return(0,i.default)(r,[{key:"render",value:function(){var e=this.props,t=e.commentThreadsStore,r=e.suggestedCustomersStore,n=t.conversations&&t.conversations.length;return r.isAgent?f.default.createElement("div",{className:"ReverseMatchmaker"},n?f.default.createElement(d.default,t):null,f.default.createElement(m.default,(0,o.default)({},r,{commentThreadsStore:t}))):null}}]),r}(f.Component);t.default=v,e.exports=t.default},K47t:function(e,t,r){"use strict";var n=r("TqRt"),a=r("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r("pVnL")),s=n(r("lwsE")),i=n(r("W8MJ")),u=n(r("7W2i")),c=n(r("a1gu")),l=n(r("Nsbk")),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=v(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var i=o?Object.getOwnPropertyDescriptor(e,s):null;i&&(i.get||i.set)?Object.defineProperty(n,s,i):n[s]=e[s]}n.default=e,r&&r.set(e,n);return n}(r("mXGw")),d=n(r("zFKn")),m=n(r("xoWO")),p=n(r("McMD")),h=n(r("Ahcz"));function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(v=function(e){return e?r:t})(e)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,l.default)(e);if(t){var a=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}r("CAmu");var y=function(e){(0,u.default)(r,e);var t=g(r);function r(e){return(0,s.default)(this,r),t.call(this,e)}return(0,i.default)(r,[{key:"render",value:function(){return f.default.createElement("div",{className:"MatchmakerCustomerSearchDialog"},f.default.createElement(m.default,{textValue:this.props.searchTextValue}),f.default.createElement("div",{className:"resultsContainer"},this._renderResults()))}},{key:"_renderResults",value:function(){return this.props.isFetchingSearchResults?this._renderWaitExperience():this.props.searchResults.length?this._renderCustomers():this._renderGhostTown()}},{key:"_renderWaitExperience",value:function(){return f.default.createElement("div",{className:"centeringContainer"},f.default.createElement("div",{className:"loading"},f.default.createElement(p.default,null)))}},{key:"_renderCustomers",value:function(){return f.default.createElement("div",{className:"results"},this.props.searchResults.map(this._renderCustomer.bind(this)))}},{key:"_renderCustomer",value:function(e){var t=this.props.customerActivity;return f.default.createElement(d.default,(0,o.default)({key:e.primaryMemberLoginId,activity:t[e.primaryMemberLoginId]},e))}},{key:"_renderGhostTown",value:function(){return f.default.createElement("div",{className:"centeringContainer"},f.default.createElement("div",{className:"ghostTown"},f.default.createElement("div",null,"No results"),f.default.createElement(h.default,null)))}}]),r}(f.Component);t.default=y,e.exports=t.default},LO3T:function(e,t,r){},MB9O:function(e,t,r){"use strict";var n=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.buildMemberFromCurrentUser=function(e,t,r){return{firstName:e,lastName:t,photo:{url:r}}},t.combineMemberNames=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;if(1===e.length)return"".concat(e[0].firstName," ").concat(e[0].lastName);if(e.length>=2){if(t){for(var r=-1,n=0;n<e.length;n++)if(e[n].loginId===t){r=n;break}if(r>=0){var a=(e=e.slice())[r];e.splice(r,1),e.unshift(a)}}return e[0].lastName===e[1].lastName?"".concat(e[0].firstName," & ").concat(e[1].firstName," ").concat(e[0].lastName):"".concat(e[0].firstName," ").concat(e[0].lastName," & ").concat(e[1].firstName," ").concat(e[1].lastName)}throw new Error("No thread members found")},t.getCustomersWithNoCommentThread=function(e,t){var r=t.map(function(e){return e.groupId});return e.filter(function(e){return r.indexOf(e.groupId)<0})},t.getFriendlyTimestamp=u,t.getPrimaryMember=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.filter(function(e){return e.loginId===t})[0]||e[0]},t.getSuggestedCustomersVisibilitySetting=function(){var e=(0,a.default)(i);if(!e)return!0;return"true"===e},t.getThreadMetadata=function(e,t){if(!e||0===e.length)throw new Error("No comments found");var r=e[e.length-1],n=u(r.created.seconds);t||(n+=" ・ ".concat(r.comment));return n},t.getWeakMatchCustomers=function(e){return e.filter(function(e){var t=!e.matchingSavedSearchIds||0===e.matchingSavedSearchIds.length;return!e.isRecommended&&t&&!e.displayedSavedSearch})},t.setSuggestedCustomersVisibilitySetting=function(e){(0,s.isBrowser)()&&(0,a.default)(i,e)};var a=n(r("72T9")),o=n(r("lcmt")),s=r("QP4D"),i="suggested_customers_visibility";function u(e){var t=new Date(0);return t.setUTCSeconds(e),o.default.formatDateInTermsOfNow(t,new Date,!0,!1,!1)}},MJtd:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=(0,r("RBnj").createActions)(["openModal","closeModal","selectCustomerToContact","sendMessageToCustomer","searchForCustomer","searchBarTextChange","back","messageDraftChange","toggleSuggestionsVisibility"]);t.default=n,e.exports=t.default},NOeI:function(e,t,r){"use strict";var n=r("TqRt"),a=r("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r("lwsE")),s=n(r("W8MJ")),i=n(r("7W2i")),u=n(r("a1gu")),c=n(r("Nsbk")),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var i=o?Object.getOwnPropertyDescriptor(e,s):null;i&&(i.get||i.set)?Object.defineProperty(n,s,i):n[s]=e[s]}n.default=e,r&&r.set(e,n);return n}(r("mXGw")),f=(n(r("17x9")),n(r("vH3W"))),d=n(r("ma35")),m=n(r("8Jek"));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,c.default)(e);if(t){var a=(0,c.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,u.default)(this,r)}}r("LO3T");var v=function(e){(0,i.default)(r,e);var t=h(r);function r(e){var n;return(0,o.default)(this,r),(n=t.call(this,e)).state={internalTextValue:""},n}return(0,s.default)(r,[{key:"_textFieldHasValue",value:function(){return this.props.isControlled?this.props.value:this.state.internalTextValue}},{key:"_handleTextChange",value:function(e){this.setState({internalTextValue:e.target.value})}},{key:"_handleSubmitComment",value:function(e){e.preventDefault(),this._textFieldHasValue()&&(this.props.onSubmit(this.state.internalTextValue),this.setState({internalTextValue:""}),this.refs.textComponent.blur())}},{key:"_renderSubmitButton",value:function(e){var t=this.props.buttonLabel||"Send",r={primary:!0,disabled:this.props.isPosting||!this._textFieldHasValue()};return l.default.createElement(d.default,{rfTestName:"MatchmakerSubmitCommentButton",className:(0,m.default)(r),size:e,formSubmit:!0},t)}},{key:"render",value:function(){var e=this.props,t=e.wrapperClassName,r=e.placeholder,n=e.buttonSize,a=e.isControlled,o=e.value,s=e.onChange,i=this.state.internalTextValue;return l.default.createElement("div",{className:"MatchmakerTextFieldWrapper ".concat(t)},l.default.createElement("form",{className:"MatchmakerTextField",onSubmit:this._handleSubmitComment.bind(this),method:"POST"},l.default.createElement(f.default,{ref:"textComponent",value:a?o:i,onChange:a?s.bind(this):this._handleTextChange.bind(this),placeholder:r,maxRows:3,rfTestId:"MatchmakerTextArea"}),this._renderSubmitButton(n)))}}]),r}(l.Component);t.default=v,v.defaultProps={placeholder:"Write a comment"},v.propTypes={},e.exports=t.default},OElx:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ModeOption",{enumerable:!0,get:function(){return o.default}}),t.default=void 0;i(r("17x9"));var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(a,i,u):a[i]=e[i]}a.default=e,r&&r.set(e,a);return a}(r("mXGw")),o=i(r("r7B7"));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}function i(e){return e&&e.__esModule?e:{default:e}}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=m(e);if(t){var a=m(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f(this,r)}}function f(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(i,a.PureComponent);var t,r,n,s=l(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=s.call(this,e)).state={selectedIndex:null!==e.initialIndex?e.initialIndex:-1},t.setSelected=t.setSelected.bind(d(t)),t}return t=i,(r=[{key:"componentDidUpdate",value:function(e){this.props.initialIndex!==e.initialIndex&&this.setState({selectedIndex:this.props.initialIndex})}},{key:"setSelected",value:function(e){this.setState({selectedIndex:e}),this.props.onModeChange(e)}},{key:"render",value:function(){var e=this;if(this.props.hidden)return null;var t=this.props.show&&this.props.options.map(function(t,r){return a.default.createElement(o.default,{id:t.key,selected:e.state.selectedIndex===r,onSelected:e.setSelected,enabled:t.enabled,key:t.key},t.name)});return a.default.createElement("div",{className:"ModeToggler ".concat(this.props.styleClass)},t)}}])&&u(t.prototype,r),n&&u(t,n),i}();p.propTypes={},p.defaultProps={styleClass:"",initialIndex:null,hidden:!1,show:!0};var h=p;t.default=h},TPSz:function(e,t,r){},UtVm:function(e,t,r){"use strict";var n=r("TqRt"),a=r("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r("lwsE")),s=n(r("W8MJ")),i=n(r("7W2i")),u=n(r("a1gu")),c=n(r("Nsbk")),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var i=o?Object.getOwnPropertyDescriptor(e,s):null;i&&(i.get||i.set)?Object.defineProperty(n,s,i):n[s]=e[s]}n.default=e,r&&r.set(e,n);return n}(r("mXGw")),f=n(r("BCv+")),d=n(r("vH3W")),m=n(r("ma35")),p=r("MJtd");function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,c.default)(e);if(t){var a=(0,c.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,u.default)(this,r)}}r("ypud");var g=function(e){(0,i.default)(r,e);var t=v(r);function r(){return(0,o.default)(this,r),t.apply(this,arguments)}return(0,s.default)(r,[{key:"_isCommentMode",value:function(){return this.props.selectedCustomer.inGroupWithAgent}},{key:"_handleTextChange",value:function(e){var t=e.target.value||"";(0,p.messageDraftChange)(t)}},{key:"_renderEmailNotice",value:function(){var e=this.props.selectedCustomer,t=e.members.filter(function(t){return t.loginId===e.primaryMemberLoginId})[0];return l.default.createElement("div",{className:"matchmakerEmailNotice"},l.default.createElement("div",{className:"matchmakerImageContainer"},l.default.createElement("img",{src:"".concat(g_imageServerUrl,"/images/reverse-matchmaker/send-email.png"),className:"matchmakerEmailImage"})),l.default.createElement("p",{className:"font-color-subtext"},"".concat(t.firstName," has not invited you to comment on homes. We will send your message via email.")))}},{key:"_renderSuccess",value:function(){var e=this._isCommentMode()?"Your comment has been sent!":"Your email has been sent!";return l.default.createElement("div",{className:"matchmakerEmailSuccess"},this._isCommentMode()?null:l.default.createElement("div",{className:"matchmakerEmailSuccessImageContainer"},l.default.createElement("img",{src:"".concat(g_imageServerUrl,"/images/reverse-matchmaker/send-email.png"),className:"matchmakerEmailSuccessImage"})),l.default.createElement("p",{className:"font-color-subtext"},e))}},{key:"_renderCompose",value:function(){var e=this.props,t=e.selectedCustomer,r=e.drafts,n=e.isSendingMessage,a=r[t.primaryMemberLoginId]||"",o=this._isCommentMode()?"Send":"Email",s=this._isCommentMode()?"Write a comment":"Write your email message";return l.default.createElement(l.Fragment,null,l.default.createElement("div",{className:"matchmakerTextAreaContainer"},l.default.createElement(d.default,{onChange:this._handleTextChange,value:a,rows:4,maxRows:4,placeholder:s})),l.default.createElement("div",{className:"matchmakerCustomerContactFooter"},l.default.createElement(m.default,{type:"primary",disabled:n,onClick:p.sendMessageToCustomer},o),this._isCommentMode()?null:this._renderEmailNotice()))}},{key:"render",value:function(){var e=this.props,t=e.selectedCustomer,r=e.displayMessageSuccess;return l.default.createElement("div",{className:"MatchmakerCustomerContactDialogDesktop"},l.default.createElement(f.default,{members:t.members,primaryMemberLoginId:t.primaryMemberLoginId}),r?this._renderSuccess():this._renderCompose())}}]),r}(l.Component);t.default=g,e.exports=t.default},VRHb:function(e,t,r){"use strict";var n=r("TqRt"),a=r("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r("lwsE")),s=n(r("W8MJ")),i=n(r("7W2i")),u=n(r("a1gu")),c=n(r("Nsbk")),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var i=o?Object.getOwnPropertyDescriptor(e,s):null;i&&(i.get||i.set)?Object.defineProperty(n,s,i):n[s]=e[s]}n.default=e,r&&r.set(e,n);return n}(r("mXGw"));n(r("17x9"));function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,c.default)(e);if(t){var a=(0,c.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,u.default)(this,r)}}r("0Zdv");var m=function(e){(0,i.default)(r,e);var t=d(r);function r(){return(0,o.default)(this,r),t.apply(this,arguments)}return(0,s.default)(r,[{key:"render",value:function(){return l.default.createElement("img",{className:"MatchmakerPortrait ".concat(this.props.size),src:this.props.url})}}]),r}(l.Component);t.default=m,m.defaultProps={size:"medium"},m.propTypes={},e.exports=t.default},Whbu:function(e,t,r){},X5UI:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAllActiveCustomersForListing=function(e){var t=(0,o.toQueryString)({listingId:e});return(0,a.default)((0,n.default)("".concat(u,"?").concat(t))).then(s.getPayloadOrThrowError)},t.getSearchResultsForListing=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30,u=(0,o.toQueryString)({listingId:e,query:t,startIndex:r,maxResults:i});return(0,a.default)((0,n.default)("".concat(c,"?").concat(u))).then(s.getPayloadOrThrowError)},t.getCustomerActivityForProperty=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=(0,o.toQueryString)({loginId:t,propertyId:e});return(0,a.default)((0,n.default)("".concat(l,"?").concat(r))).then(s.getPayloadOrThrowError)},t.sendSuggestionEmailToCustomer=function(e,t,r){var o=(0,n.default)(f,{method:"POST",headers:{"Content-Type":"form-data"},body:{customerLoginId:t,listingId:e,textContent:r,useDefaultTemplate:!0}});return(0,a.default)(o).then(s.getPayloadOrThrowError)},t.emailUrl=t.activityUrl=t.searchUrl=t.getUrl=t.DEFAULT_ERROR_MESSAGE=void 0;var n=i(r("x3Yk")),a=i(r("cXUB")),o=r("jbDj"),s=r("BHWi");function i(e){return e&&e.__esModule?e:{default:e}}t.DEFAULT_ERROR_MESSAGE="Oops, something went wrong. Please try again later.";var u="/stingray/do/api/v1/suggested-customers";t.getUrl=u;var c="/stingray/do/api/v1/suggested-customers/search";t.searchUrl=c;var l="/stingray/do/api/v1/suggested-customers/interactions";t.activityUrl=l;var f="/tools/emails/api/send/listingrecommendation";t.emailUrl=f},"Xu9+":function(e,t,r){"use strict";var n=r("TqRt"),a=r("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r("pVnL")),s=n(r("lwsE")),i=n(r("W8MJ")),u=n(r("7W2i")),c=n(r("a1gu")),l=n(r("Nsbk")),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var i=o?Object.getOwnPropertyDescriptor(e,s):null;i&&(i.get||i.set)?Object.defineProperty(n,s,i):n[s]=e[s]}n.default=e,r&&r.set(e,n);return n}(r("mXGw")),d=n(r("luvc")),m=n(r("xoWO")),p=n(r("zFKn")),h=n(r("OElx")),v=r("MB9O");function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(g=function(e){return e?r:t})(e)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,l.default)(e);if(t){var a=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}r("t+lH");var b=[{key:0,name:f.default.createElement("span",{className:"modeOptionInnard first"},"Suggested"),enabled:!0}],C=function(e){(0,u.default)(r,e);var t=y(r);function r(){return(0,s.default)(this,r),t.apply(this,arguments)}return(0,i.default)(r,[{key:"_renderMobileContent",value:function(){return f.default.createElement(f.Fragment,null,f.default.createElement(h.default,{options:b,initialIndex:0,styleClass:"displayModeToggler"}),this._renderCustomers(this.props.suggestedCustomers,null))}},{key:"_renderDesktopContent",value:function(){return this._renderSuggestedCustomers()}},{key:"_renderSuggestedCustomers",value:function(){var e=this.props,t=e.suggestedCustomers,r=e.commentThreadsStore,n=(0,v.getCustomersWithNoCommentThread)(t,r.conversations);return this._renderCustomers(n,"Suggested")}},{key:"_renderCustomers",value:function(e,t){var r=e.map(this._renderCustomer.bind(this));return f.default.createElement("div",{className:"customers"},null!==t&&f.default.createElement("h3",null,t),r)}},{key:"_renderCustomer",value:function(e){var t=this.props.customerActivity;return f.default.createElement(p.default,(0,o.default)({key:e.primaryMemberLoginId,activity:t[e.primaryMemberLoginId]},e))}},{key:"render",value:function(){var e=(0,d.default)("screen-size")<d.default.screenSizes.MEDIUM;return f.default.createElement("div",{className:"MatchmakerCustomerListDialog"},f.default.createElement(m.default,{textValue:this.props.searchTextValue}),e?this._renderMobileContent():this._renderDesktopContent())}}]),r}(f.Component);t.default=C,e.exports=t.default},"ZE6+":function(e,t,r){},aJIK:function(e,t,r){"use strict";var n=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.getProfilePhotoUrl=t.default=void 0;var a=n(r("RIqP")),o=n(r("lSNA")),s=n(r("pVnL")),i=n(r("cXUB")),u=n(r("m7qm")),c=n(r("vVLA")),l=r("Q+Iq"),f=r("jbDj"),d=r("Agof"),m=n(r("/4Do")),p=n(r("xs9F")),h=n(r("5p6h")),v=n(r("gOpR"));t.getProfilePhotoUrl="/stingray/do/api-get-user-photo-url";var g=u.default.createStoreFactory({init:function(e){this.setState({listingId:e.listingId,propertyId:e.propertyId,accessLevel:e.accessLevel,addressSectionInfo:e.addressSectionInfo,isFetching:!1,isPosting:!1,postError:null,fetchError:null,conversations:[],expandedThreads:{},currentUser:m.default.getCurrentUserData(),currentUserPhotoUrl:null,currentOpenThread:null}),this.listenTo(c.default.toggleExpandCommentThread,this.onToggleExpandCommentThread),this.listenTo(c.default.postComment,this.onPostComment),this.listenTo(c.default.fetchCommentThreads,this.onFetchCommentThreads),this.listenTo(c.default.openThreadView,this.onOpenThreadView),this.listenTo(c.default.closeThreadView,this.onCloseThreadView),this._fetchCommentThreads(),this._fetchCurrentUserPhotoUrl()},onToggleExpandCommentThread:function(e){return this._toggleExpandCommentThread(e)},onPostComment:function(e,t){return p.default.trackClick(p.default.clicks.SEND_BUTTON,{loginGroupId:e}),this._postComment(e,t)},onFetchCommentThreads:function(){return this._fetchCommentThreads()},onOpenThreadView:function(e){return p.default.trackClick(p.default.clicks.SHOW_CONVERSATION),(0,d.updateLastViewed)(this.state.propertyId,e),this._openThreadView(e)},onCloseThreadView:function(){return p.default.trackClick(p.default.clicks.HIDE_CONVERSATION),this._closeThreadView()},_expandOrCollapseCommentThread:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2?arguments[2]:void 0;if(!r){var n=t?p.default.clicks.SHOW_CONVERSATION:p.default.clicks.HIDE_CONVERSATION;p.default.trackClick(n)}this.setState({expandedThreads:(0,s.default)({},this.state.expandedThreads,(0,o.default)({},e,t))}),t&&(0,d.updateLastViewed)(this.state.propertyId,e)},_toggleExpandCommentThread:function(e){this._expandOrCollapseCommentThread(e,!this.state.expandedThreads[e])},_addNewCommentToThread:function(e){var t={id:e.id,groupId:e.groupId,propertyId:e.propertyId,loginId:e.loginId,commenterName:e.loginFirstName,comment:e.comment,created:{seconds:Math.floor(e.lastModified/1e3),nanos:e.lastModified%1e3*1e6},notifyAgent:!1},r=[];this.state.conversations.forEach(function(n){n.groupId===e.groupId&&(n.propertyConversation.conversation=[].concat((0,a.default)(n.propertyConversation.conversation),[t])),r.push(n)}),this.setState({conversations:r})},_postComment:function(e,t){var r=this;return this.setState({isPosting:!0,postError:null}),(0,d.postComment)({propertyId:this.state.propertyId,loginGroupId:e,comment:t.trim()}).then(function(e){r._addNewCommentToThread(e)}).catch(function(e){r.setState({postError:e}),h.default.showErrorNotice({title:"Oops, something went wrong. Please try again later"})}).finally(function(){r.setState({isPosting:!1})})},_fetchCommentThreads:function(){var e=this;return this.state.accessLevel!==v.default.id?(0,i.default)():(this.setState({isFetching:!0,fetchError:null}),(0,d.fetchConversationThreadsForProperty)(this.state.propertyId).then(function(t){if(e.setState({conversations:t}),1===t.length){var r=t[0].groupId;e._expandOrCollapseCommentThread(r,!0,!0)}}).catch(function(t){e.setState({fetchError:t})}).finally(function(){e.setState({isFetching:!1})}))},_fetchCurrentUserPhotoUrl:function(){var e=this;if(this.state.accessLevel!==v.default.id)return(0,i.default)();var t=(0,f.toQueryString)({loginId:this.state.currentUser.id});return(0,l.getEndpoint)("".concat("/stingray/do/api-get-user-photo-url","?").concat(t)).then(function(t){e.setState({currentUserPhotoUrl:t.newData.medium.url})})},_openThreadView:function(e){this.setState({currentOpenThread:e})},_closeThreadView:function(){this.setState({currentOpenThread:null})}});t.default=g},b1Fl:function(e,t,r){},"cW/f":function(e,t,r){},ebB6:function(e,t,r){},hBbC:function(e,t,r){"use strict";var n=r("TqRt"),a=r("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r("lwsE")),s=n(r("W8MJ")),i=n(r("7W2i")),u=n(r("a1gu")),c=n(r("Nsbk")),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=v(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var i=o?Object.getOwnPropertyDescriptor(e,s):null;i&&(i.get||i.set)?Object.defineProperty(n,s,i):n[s]=e[s]}n.default=e,r&&r.set(e,n);return n}(r("mXGw")),f=n(r("00g4")),d=n(r("NOeI")),m=r("MJtd"),p=n(r("BCv+")),h=n(r("syNK"));function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(v=function(e){return e?r:t})(e)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,c.default)(e);if(t){var a=(0,c.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,u.default)(this,r)}}r("ZE6+");var y=function(e){(0,i.default)(r,e);var t=g(r);function r(){return(0,o.default)(this,r),t.apply(this,arguments)}return(0,s.default)(r,[{key:"_isCommentMode",value:function(){return this.props.selectedCustomer.inGroupWithAgent}},{key:"_handleTextChange",value:function(e){var t=e.target.value||"";(0,m.messageDraftChange)(t)}},{key:"_renderEmailContent",value:function(){var e=this.props,t=e.displayMessageSuccess,r=e.selectedCustomer,n=r.members.filter(function(e){return e.loginId===r.primaryMemberLoginId})[0],a=t?"Your email has been sent!":"".concat(n.firstName," has not invited you to comment on homes. We will send your message via email.");return l.default.createElement("div",{className:"matchmakerEmailNotice"},l.default.createElement(p.default,{members:r.members,primaryMemberLoginId:r.primaryMemberLoginId}),l.default.createElement("div",{className:"matchmakerEmailNoticeCenteredContent"},l.default.createElement("div",{className:"matchmakerImageContainer"},l.default.createElement("img",{src:"".concat(g_imageServerUrl,"/images/reverse-matchmaker/send-email.png"),className:"matchmakerEmailImage"})),l.default.createElement("p",{className:"font-color-subtext matchmakerEmailNoticeText"},a)))}},{key:"_renderCommentsContent",value:function(){var e=this.props,t=e.selectedCustomer,r=e.commentThreadsStore,n=r.conversations.filter(function(e){return e.groupId===t.groupId})[0],a=n?n.propertyConversation.conversation:[],o=n?n.members:[];return l.default.createElement(f.default,{elementCount:a.length},l.default.createElement(p.default,{members:t.members,primaryMemberLoginId:t.primaryMemberLoginId}),l.default.createElement(h.default,{comments:a,members:o,groupId:t.groupId,currentUser:r.currentUser,currentUserPhotoUrl:r.currentUserPhotoUrl}))}},{key:"render",value:function(){var e=this.props,t=e.isSendingMessage,r=e.selectedCustomer,n=e.drafts,a=e.displayMessageSuccess,o=e.commentThreadsStore,s=n[r.primaryMemberLoginId]||"",i=this._isCommentMode()?"Send":"Email",u=!this._isCommentMode()&&a,c=this._isCommentMode()?o.isPosting:t;return l.default.createElement("div",{className:"MatchmakerCustomerContactDialogMobile"},this._isCommentMode()?this._renderCommentsContent():this._renderEmailContent(),u?null:l.default.createElement(d.default,{wrapperClassName:"mobile",placeholder:"What do you want to say?",onSubmit:m.sendMessageToCustomer,buttonSize:"compact",isPosting:c,isControlled:!0,value:s,onChange:this._handleTextChange,buttonLabel:i}))}}]),r}(l.Component);t.default=y,e.exports=t.default},m7gb:function(e,t,r){},mHYx:function(e,t,r){},r7B7:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;i(r("17x9"));var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(a,i,u):a[i]=e[i]}a.default=e,r&&r.set(e,a);return a}(r("mXGw")),o=i(r("8Jek"));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}function i(e){return e&&e.__esModule?e:{default:e}}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=m(e);if(t){var a=m(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f(this,r)}}function f(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p,h,v,g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(i,a.Component);var t,r,n,s=l(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=s.call(this,e)).handleClick=t.handleClick.bind(d(t)),t}return t=i,(r=[{key:"handleClick",value:function(){!this.props.selected&&this.props.enabled&&this.props.onSelected(this.props.id)}},{key:"render",value:function(){var e=(0,o.default)({ModeOption:!0,selected:this.props.enabled&&this.props.selected,disabled:!this.props.enabled,"button-text":!0});return a.default.createElement("button",{className:e,onClick:this.handleClick,"data-rf-test-name":"mode-option"},this.props.children)}}])&&u(t.prototype,r),n&&u(t,n),i}();v={enabled:!0},(h="defaultProps")in(p=g)?Object.defineProperty(p,h,{value:v,enumerable:!0,configurable:!0,writable:!0}):p[h]=v,g.propTypes={};var y=g;t.default=y,e.exports=t.default},syNK:function(e,t,r){"use strict";var n=r("TqRt"),a=r("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r("lwsE")),s=n(r("W8MJ")),i=n(r("7W2i")),u=n(r("a1gu")),c=n(r("Nsbk")),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=v(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var i=o?Object.getOwnPropertyDescriptor(e,s):null;i&&(i.get||i.set)?Object.defineProperty(n,s,i):n[s]=e[s]}n.default=e,r&&r.set(e,n);return n}(r("mXGw")),f=(n(r("17x9")),n(r("2TKG"))),d=n(r("NOeI")),m=n(r("luvc")),p=n(r("vVLA")),h=r("MB9O");function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(v=function(e){return e?r:t})(e)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,c.default)(e);if(t){var a=(0,c.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,u.default)(this,r)}}r("TPSz");var y=function(e){(0,i.default)(r,e);var t=g(r);function r(e){var n;return(0,o.default)(this,r),(n=t.call(this,e)).state={smallScreen:(0,m.default)("screen-size")<=m.default.screenSizes.SMALL},n}return(0,s.default)(r,[{key:"_renderComment",value:function(e){var t,r=this.props,n=r.currentUser,a=r.currentUserPhotoUrl;return(t=e.loginId===n.id?(0,h.buildMemberFromCurrentUser)(n.person.firstName,n.person.lastName,a):this.props.members.find(function(t){return t.loginId===e.loginId}))?l.default.createElement(f.default,{key:e.id,firstName:t.firstName,lastName:t.lastName,userPhotoUrl:t.photo.url,comment:e.comment,created:e.created}):null}},{key:"_handleSubmitComment",value:function(e){p.default.postComment(this.props.groupId,e)}},{key:"_renderForm",value:function(){return l.default.createElement(d.default,{onSubmit:this._handleSubmitComment.bind(this),wrapperClassName:"desktop",buttonSize:"default",isPosting:this.props.isPosting})}},{key:"render",value:function(){var e=this.props.comments,t=this.state.smallScreen;return l.default.createElement("div",{className:"MatchmakerCommentList"},e.map(this._renderComment.bind(this)),t?null:this._renderForm())}}]),r}(l.Component);t.default=y,y.propTypes={},y.defaultProps={comments:[]},e.exports=t.default},"t+lH":function(e,t,r){},t7LH:function(e,t,r){"use strict";var n=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r("lwsE")),o=n(r("W8MJ")),s=n(r("7W2i")),i=n(r("a1gu")),u=n(r("Nsbk")),c=r("mXGw"),l=n(r("67wX")),f=r("TRKi"),d=n(r("GmUY"));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,u.default)(e);if(t){var a=(0,u.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var p=function(e){(0,s.default)(r,e);var t=m(r);function r(e){var n;(0,a.default)(this,r),n=t.call(this,e);var o=new l.default({listingId:n.props.listingId,propertyId:n.props.propertyId,accessLevel:n.props.accessLevel,addressSectionInfo:n.props.addressSectionInfo});return n.state={reverseMatchmakerStore:o},n}return(0,o.default)(r,[{key:"render",value:function(){var e=(0,f.createRootElement)(this.state.reverseMatchmakerStore,React.createElement(d.default,null));return React.createElement("div",{"data-rf-test-id":"reverseMatchmakerWrapper"},e)}}]),r}(c.Component);t.default=p,e.exports=t.default},vVLA:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=(0,r("RBnj").createActions)(["toggleExpandCommentThread","postComment","fetchCommentThreads","openThreadView","closeThreadView"]);t.default=n,e.exports=t.default},wcuB:function(e,t,r){"use strict";var n=r("TqRt"),a=r("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r("lwsE")),s=n(r("W8MJ")),i=n(r("7W2i")),u=n(r("a1gu")),c=n(r("Nsbk")),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=b(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var i=o?Object.getOwnPropertyDescriptor(e,s):null;i&&(i.get||i.set)?Object.defineProperty(n,s,i):n[s]=e[s]}n.default=e,r&&r.set(e,n);return n}(r("mXGw")),f=(n(r("17x9")),n(r("4ppV"))),d=n(r("vVLA")),m=n(r("jhpn")),p=r("+xFC"),h=n(r("00g4")),v=n(r("NOeI")),g=n(r("BCv+")),y=n(r("syNK"));function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(b=function(e){return e?r:t})(e)}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,c.default)(e);if(t){var a=(0,c.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,u.default)(this,r)}}r("0Buv");var _=function(e){(0,i.default)(r,e);var t=C(r);function r(){return(0,o.default)(this,r),t.apply(this,arguments)}return(0,s.default)(r,[{key:"_close",value:function(){d.default.closeThreadView()}},{key:"_handleSubmitComment",value:function(e){d.default.postComment(this.props.currentOpenThread,e)}},{key:"render",value:function(){var e=this.props,t=e.addressSectionInfo,r=e.conversations,n=e.currentOpenThread,a=e.currentUser,o=e.currentUserPhotoUrl,s=e.isPosting,i=r.find(function(e){return e.groupId===n}),u=i.members,c=i.propertyConversation,d=i.groupId,b=i.primaryMemberLoginId,C=(0,p.formatNumber)(t.priceInfo.amount),_="".concat(t.beds," ").concat(t.beds>1?"beds":"bed"),S="".concat(t.baths," ").concat(t.baths>1?"baths":"bath");return l.default.createElement(f.default,{className:"MatchmakerCommentsMobileContainer",classNames:"matchmakerDialogWrap",fullScreenOnMobile:!0,transitionAppear:!0,shouldPreventScrollingDown:!0,showCloseButton:!1},l.default.createElement("div",{className:"header"},l.default.createElement("div",{className:"backButton",onClick:this._close},l.default.createElement(m.default,null)),l.default.createElement("img",{className:"homePhoto",src:t.primaryPhotoUrl}),l.default.createElement("div",{className:"homeDetails"},l.default.createElement("p",{className:"font-size-smaller font-weight-bold"},t.streetAddress.assembledAddress),l.default.createElement("p",{className:"font-size-smaller font-color-gray-light"},"$".concat(C," ・ ").concat(_,", ").concat(S)))),l.default.createElement(h.default,{elementCount:c.conversation.length},l.default.createElement(g.default,{members:u,primaryMemberLoginId:b}),l.default.createElement(y.default,{comments:c.conversation,members:u,groupId:d,currentUser:a,currentUserPhotoUrl:o})),l.default.createElement(v.default,{wrapperClassName:"mobile",placeholder:"What do you want to say?",onSubmit:this._handleSubmitComment.bind(this),buttonSize:"compact",isPosting:s}))}}]),r}(l.Component);t.default=_,_.propTypes={},e.exports=t.default},"xK+f":function(e,t,r){},xoWO:function(e,t,r){"use strict";var n=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r("lwsE")),o=n(r("W8MJ")),s=n(r("7W2i")),i=n(r("a1gu")),u=n(r("Nsbk")),c=n(r("mXGw")),l=n(r("Xecl")),f=n(r("ma35")),d=n(r("Ahcz")),m=n(r("luvc")),p=r("MJtd");function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,u.default)(e);if(t){var a=(0,u.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}r("Whbu");var v=function(e){(0,s.default)(r,e);var t=h(r);function r(e){return(0,a.default)(this,r),t.call(this,e)}return(0,o.default)(r,[{key:"_onTextChange",value:function(e,t){(0,p.searchBarTextChange)(t)}},{key:"_formSubmit",value:function(e){e.preventDefault(),this.props.textValue.trim()&&(0,p.searchForCustomer)(this.props.textValue.trim())}},{key:"render",value:function(){var e=c.default.createElement(d.default,{classname:"searchIcon"}),t=(0,m.default)("screen-size")<=m.default.screenSizes.SMALL,r=t?null:c.default.createElement("div",{className:"iconWrapper"},e);return c.default.createElement("form",{className:"MatchmakerSearchBar",onSubmit:this._formSubmit.bind(this),method:"POST"},c.default.createElement(l.default,{type:"text",className:"inputWrapper",placeholder:"Search by name",value:this.props.textValue,onChange:this._onTextChange.bind(this)}),r,c.default.createElement(f.default,{type:"tertiary",size:"default",svgAsset:t?d.default:null,formSubmit:!0},t?null:"Search"))}}]),r}(c.default.Component);t.default=v,e.exports=t.default},xs9F:function(e,t,r){"use strict";var n=r("TqRt"),a=n(r("3OWR")),o=n(r("LDFp")),s=n(r("pBXq")),i=(0,a.default)(new s.default,{name:"ReverseMatchmakerRiftTracker",bouncerFlags:[o.default.RIFT_ON_LDP],trackAllEventsInGA:!0,impressions:{CUSTOMER_MATCHES:{section:"customer_matches",target:null},CONVERSATION_THREADS:{section:"conversation_threads",target:null}},clicks:{HIDE_SECTION:{section:"customer_matches",target:"hide_section"},SHOW_SECTION:{section:"customer_matches",target:"show_section"},COMMENT_BUTTON:{section:"customer_matches",target:"comment_button",expectedParams:["customer","isSuggested","contactMethod","location"]},EMAIL_BUTTON:{section:"customer_matches",target:"email_button",expectedParams:["customer","isSuggested","contactMethod","location"]},SEE_MORE_CUSTOMERS_BUTTON:{section:"customer_matches",target:"see_more_customers_button"},SEND_TO_CUSTOMER_BUTTON:{section:"customer_matches",target:"send_to_customer_button"},SEARCH_BUTTON:{section:"customer_matches",target:"search_button",expectedParams:["searchString"]},CLOSE_CUSTOMER_MATCHES_BUTTON:{section:"customer_matches",target:"close_button",expectedParams:["location"]},CUSTOMER_MATCHES_SEND_BUTTON:{section:"customer_matches",target:"send_button",expectedParams:["customer","isSuggested","contactMethod"]},SEE_MORE_COMMENT_THREADS_BUTTON:{section:"conversation_threads",target:"see_more_comment_threads_button"},SHOW_CONVERSATION:{section:"conversation_threads",target:"show_conversation"},HIDE_CONVERSATION:{section:"conversation_threads",target:"hide_conversation"},SEND_BUTTON:{section:"conversation_threads",target:"send_button",expectedParams:["loginGroupId"]},PROFILE:{section:"comment_composer",target:"profile"}}});e.exports=i},yAOv:function(e,t,r){"use strict";var n=r("TqRt"),a=r("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r("lwsE")),s=n(r("W8MJ")),i=n(r("7W2i")),u=n(r("a1gu")),c=n(r("Nsbk")),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var i=o?Object.getOwnPropertyDescriptor(e,s):null;i&&(i.get||i.set)?Object.defineProperty(n,s,i):n[s]=e[s]}n.default=e,r&&r.set(e,n);return n}(r("mXGw")),f=(n(r("17x9")),n(r("zCAw"))),d=n(r("4HN6")),m=n(r("Ncjd")),p=n(r("luvc")),h=r("MJtd"),v=r("/wj7");function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(g=function(e){return e?r:t})(e)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,c.default)(e);if(t){var a=(0,c.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,u.default)(this,r)}}var b=function(e){(0,i.default)(r,e);var t=y(r);function r(){return(0,o.default)(this,r),t.apply(this,arguments)}return(0,s.default)(r,[{key:"_getHeaderTitle",value:function(){switch(this.props.topOfModalNavigationStack){case v.ModalView.SELECT:return"Select a customer";case v.ModalView.SEARCH:return"Search results";case v.ModalView.CONTACT:return"Compose message"}}},{key:"_maybeRenderBackButton",value:function(){var e=this.props,t=e.topOfModalNavigationStack,r=e.modalNavigationStackLength,n=(0,p.default)("screen-size")<p.default.screenSizes.MEDIUM;if(!t||r<=1)return n?l.default.createElement("div",{className:"backContainer"}):null;var a=n?d.default:m.default;return l.default.createElement("div",{className:"clickable backContainer",onClick:h.back},l.default.createElement(a,{className:"fill-copy size-medium"}))}},{key:"render",value:function(){return l.default.createElement("div",{className:"SuggestedCustomersDialogHeader"},this._maybeRenderBackButton(),l.default.createElement("p",null,this._getHeaderTitle()),l.default.createElement("div",{className:"clickable",onClick:h.closeModal},l.default.createElement(f.default,{className:"fill-copy size-medium"})))}}]),r}(l.Component);t.default=b,b.propTypes={},e.exports=t.default},yWe4:function(e,t,r){"use strict";var n=r("TqRt"),a=r("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r("lwsE")),s=n(r("W8MJ")),i=n(r("7W2i")),u=n(r("a1gu")),c=n(r("Nsbk")),l=n(r("mXGw")),f=(n(r("17x9")),function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=b(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var i=o?Object.getOwnPropertyDescriptor(e,s):null;i&&(i.get||i.set)?Object.defineProperty(n,s,i):n[s]=e[s]}n.default=e,r&&r.set(e,n);return n}(r("4ppV"))),d=n(r("Xu9+")),m=n(r("UtVm")),p=n(r("hBbC")),h=n(r("K47t")),v=n(r("yAOv")),g=n(r("luvc")),y=r("/wj7");function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(b=function(e){return e?r:t})(e)}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,c.default)(e);if(t){var a=(0,c.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,u.default)(this,r)}}r("mHYx");var _=function(e){(0,i.default)(r,e);var t=C(r);function r(e){var n;return(0,o.default)(this,r),(n=t.call(this,e)).state={smallScreen:(0,g.default)("screen-size")<=g.default.screenSizes.SMALL},n}return(0,s.default)(r,[{key:"_renderInnards",value:function(){var e=this.props.topOfModalNavigationStack,t=this.state.smallScreen;switch(e){case y.ModalView.CONTACT:return t?l.default.createElement(p.default,this.props):l.default.createElement(m.default,this.props);case y.ModalView.SEARCH:return l.default.createElement(h.default,this.props);default:return l.default.createElement(d.default,this.props)}}},{key:"render",value:function(){return 0===this.props.modalNavigationStackLength?null:l.default.createElement(f.default,{className:"SuggestedCustomersDialogWrapper ".concat(f.DRAWER_STYLE_CLASS),showCloseButton:!1,size:"custom",transitionAppear:!0,fullScreenOnMobile:!0},l.default.createElement(v.default,{modalNavigationStackLength:this.props.modalNavigationStackLength,topOfModalNavigationStack:this.props.topOfModalNavigationStack}),this._renderInnards())}}]),r}(l.default.Component);t.default=_,_.propTypes={},e.exports=t.default},ypud:function(e,t,r){},zFKn:function(e,t,r){"use strict";var n=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r("lwsE")),o=n(r("W8MJ")),s=n(r("7W2i")),i=n(r("a1gu")),u=n(r("Nsbk")),c=r("mXGw"),l=(n(r("17x9")),n(r("VRHb"))),f=r("MJtd"),d=r("MB9O"),m=r("bqcM"),p=n(r("luvc"));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,u.default)(e);if(t){var a=(0,u.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}r("xK+f");var v=function(e){(0,s.default)(r,e);var t=h(r);function r(e){return(0,a.default)(this,r),t.call(this,e)}return(0,o.default)(r,[{key:"_getActivityDisplayText",value:function(){var e=this.props.activity;return e&&"PENDING"!==e?e.favoriteActivity?1===e.favoriteActivity?"Favorite":"X-Out":e.viewHistory?"Viewed":"Hasn't Viewed":null}},{key:"_getMatchSourceDisplayText",value:function(){var e=this.props,t=e.isRecommended,r=e.matchingSavedSearchIds,n=e.displayedSavedSearch;if(r&&r.length>0&&n){var a=n.searchUrl,o=n.searchName,s=n.countryCode,i=(0,m.getSecureWebServerUrlForDomain)(s)+a,u=r.length,c="".concat(u," ").concat(u>1?"Saved Searches":"Saved Search");return React.createElement("span",null,"Matches ".concat(c,". View "),React.createElement("a",{href:i},o),".")}return t?"Matches browsing history":"Possible Match"}},{key:"_renderUserPortrait",value:function(){var e=this.props,t=e.members,r=e.primaryMemberLoginId,n=(0,d.getPrimaryMember)(t,r),a=(0,p.default)("screen-size")<=p.default.screenSizes.SMALL?"medium":"small";return React.createElement("div",{className:"user-portrait-container"},React.createElement(l.default,{size:a,url:n.photo.url}))}},{key:"_renderGroupNameAndMatchQuality",value:function(){return React.createElement("div",{className:"name-and-match-metadata"},React.createElement("div",{className:"group-name"},this.props.combinedMemberNames),React.createElement("div",{className:"match-metadata font-size-small font-color-gray-light"},React.createElement("div",{className:"match-activity"},this._getActivityDisplayText()),React.createElement("div",null," ・ "),React.createElement("div",{className:"match-source"},this._getMatchSourceDisplayText())))}},{key:"_renderContactCTA",value:function(){var e,t;return this.props.inGroupWithAgent?(e=!0,t="Comment"):this.props.previouslyEmailedByAgent?(e=!1,t="Sent"):(e=!0,t="Email"),React.createElement("div",{className:"contact-cta"},React.createElement("a",{className:e?"clickable":"not-clickable",onClick:e?this._onContactCTA.bind(this):null},t))}},{key:"_onContactCTA",value:function(){(0,f.selectCustomerToContact)(this.props)}},{key:"render",value:function(){return React.createElement("div",{className:"CustomerSuggestion"},this._renderUserPortrait(),this._renderGroupNameAndMatchQuality(),this.props.showContactCTA?this._renderContactCTA():null)}}]),r}(c.Component);t.default=v,v.propTypes={},v.defaultProps={showContactCTA:!0},e.exports=t.default}}]);